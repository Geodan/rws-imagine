<!DOCTYPE html>

<html>
  <head>
  <title>Score board</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta charset="utf-8">
  <script src="./bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
  <link rel="import" href="./bower_components/polymer/polymer.html">
  <link rel="import" href="./bower_components/iron-selector/iron-selector.html">
  <link rel="import" href="./elements/gm-cow-core.html">
  <link rel="import" href="./elements/imagine-instance.html">
  
  </head>
  <body>
  
  
  
  <template id="main" is="dom-bind">
  <style>
  .button {
  	  max-width: 200px;
  	  background-color: steelBlue;
  	  margin: 5px;
  	  padding: 5px;
  	  cursor: pointer;
  }
  </style>
  	<div>
	  <iron-selector attr-for-selected="name" selected="{{team}}">
		<span class='button' name="Team A">Team A</span>
		<span class='button' name="Team B">Team B</span>
		<span class='button' name="Team C">Team C</span>
		<span class='button' name="Team D">Team D</span>
	  </iron-selector>
	</div>
	<br>
	<div>
	  <iron-selector attr-for-selected="name" selected="{{scenario}}">
		<span class='button' name="sprawlville">Sprawlville</span>
		<span class='button' name="communicity">Communicity</span>
		<span class='button' name="renewabad">Renewabad</span>
		<span class='button' name="planopolis">Planopolis</span>
	  </iron-selector>
	</div>
	  <br>
	  
	  
  
	  Team: <span>{{team}}</span><br>
	  Scenario: <span>{{scenario}}</span><br>
	  Score: <span>{{score}}</span><br>
	  <!--
	  <h3>Verbindingen nodig</h3>
	  <template is='dom-repeat'  items="{{verbindingen_org}}">
	  	<span>{{item._data.van}}</span> -> <span>{{item._data.naar}}</span><br>
	  </template>
	  -->
	  <h3>Verbindingen</h3>
	  <template is='dom-repeat'  items="{{verbindingen}}">
	  	<span>{{item._data.vanid}}</span> -> <span>{{item._data.naarid}}</span><br>
	  </template>
	  <h3>Kaartjes</h3>
	  <template is='dom-repeat'  items="{{kaartjes}}">
	  	<div>[[item._data.name]]</div>
	  	<table>
	  	<tr>
	  		<th></th><th></th>
	  	</tr>
	  	<tr>
	  		<td>delta X</td>
	  		<td>{{deltaX(item)}}</td>
	  		
		</tr>
		<tr>
			<td>delta Y</td>
	  		<td>{{deltaY(item)}}</td>
	  	</tr>
	  	</table>
	  	score:<span>{{item._data.score}}</span>
	  	</div>
	  	<br>
	  </template>
	  <gm-cow-core id="cowcore" config="{{cowconfig}}" core="{{cow}}"></gm-cow-core>  
	  <imagine-instance id="instance" core="{{cow}}" team="{{team}}" scenario="{{scenario}}" score="{{score}}" kaartjes="{{kaartjes}}" verbindingen="{{verbindingen}}" verbindingen_org="{{verbindingen_org}}"></imagine-instance>
  </template>
  <script type="text/javascript">
  var main = document.querySelector('#main');
  main.deltaX = function(item){
  	  return item._data.x ? Math.round(Math.abs(item._data.x_org -  item._data.x)): '';   
  }
  main.deltaY = function(item){
  	  return item._data.x ? Math.round(Math.abs(item._data.y_org -  item._data.y)): '';   
  }
  
  main.cowconfig ={
  	key: 'imagine',
  	protocol:'wss',
	url:'websocket.geodan.nl', 
	port:443,
	dir: 'imagine'
  };
  // The dom-change event signifies when the template has stamped its DOM.
  main.addEventListener('dom-change', function() {
	  
  });
	  
  </script>
  </body>
  </html>
